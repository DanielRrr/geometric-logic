\documentclass[a4paper]{article}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{bussproofs}
\usepackage{mathtools}
\usepackage{verbatim}
\usepackage{dsfont}
\usepackage{mathabx}
\usepackage[all, 2cell]{xy}
\usepackage[all]{xy}
\usepackage{wasysym}
\usepackage{rotating}
\usepackage{geometry}
\usepackage{trfsigns}
\usepackage{cmll}
\usepackage{authblk}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{lipsum}
\usepackage{extpfeil}
\usepackage{soul}
\usepackage{graphicx}

\newcommand\mapsfrom{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}

\theoremstyle{defin}
\newtheorem{definition}{Definition}

\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}

\theoremstyle{claim}
\newtheorem{claim}{Claim}

\theoremstyle{prop}
\newtheorem{prop}{Proposition}

\theoremstyle{lemma}
\newtheorem{lemma}{Lemma}

\theoremstyle{fact}
\newtheorem{fact}{Fact}

\theoremstyle{ex}
\newtheorem{ex}{Example}


\theoremstyle{col}
\newtheorem{col}{Corollary}

\let\strokeL\L
\DeclareRobustCommand{\L}{\ifmmode\mathbf{L}\else\strokeL\fi}

\author{Daniel Rogozin}
\date{}
\title{Notes on Geometric logic}

\begin{document}

\maketitle

\tableofcontents

\newpage

\nocite{*}

\section{Locales and quantales}

A frame is a complete lattice $\mathcal{L} = (L, \wedge, \bigvee)$ such that, for all $a \in L$ and $A \subseteq L$:
\begin{center}
$a \wedge \bigvee A = \bigvee \{ a \wedge b \: | \: b \in A \}$
\end{center}
A frame homeomorphism is a map between frames that preserves $0$, $1$, $\wedge$ and $\bigvee$. The ${\bf Frm}$ is the category of all frames and homeomorphisms, the category of locales ${\bf Loc}$ is said to be the opposite category of the category of frames.

The notion of a quantale generalises frames. A quantale $\mathcal{Q} = (Q, \cdot, \bigvee)$ is a complete lattice-ordered semigroup such that, for all $a \in Q$ and $A \subseteq Q$:
\begin{center}
$a \cdot \bigvee A = \bigvee \{ a \cdot b \: | \: b \in A \}$

$\bigvee A \cdot a = \bigvee \{ b \cdot a \: | \: b \in A \}$.
\end{center}

\subsection{Examples of locales}

\subsection{Examples of quantales}

Let $\operatorname{Sub}(\mathcal{R})$ be the set of all additive subgroups of a ring $\mathcal{R}$. Let $A \subseteq \operatorname{Sub}(\mathcal{R})$ and $G, H \in \operatorname{Sub}(\mathcal{R})$, define supremum and product as follows:
\begin{center}
$\bigvee A = \{ \sum A' \: | \: A' \subseteq_{fin} A \}$,

$G \cdot H = \{ \sum \limits_{i = 0}^n a_i b_i \: | \: a_i \in G, b_i \in H, n < \omega \}$
\end{center}

\subsubsection{Quantales from $C^{*}$-algebras}

The first is to define $C^{*}$-algebras. Let $K$ be a field, an \emph{associative $K$-algebra} is a vector space $A$ over $K$ with a bilinear map $\times : A \times A \to A$, which is also associative. A Banach algebra is a $K$-algebra (where $K$ is either $\mathbb{R}$ or $\mathbb{C}$), which is also a Banach space, i.e., a complete normed vector space and the norm satisfies the inequation, for all $x, y \in A$:
\begin{center}
$||x \times y|| \leq ||x|| \cdot ||y||$
\end{center}

A $C^{*}$-algebra is a Banach algebra $A$ over the field of complex numbers with the involution operation $* : A \to A$ such that, for all $x, y \in A$:
\begin{itemize}
\item $(x + y) = x^* + y^*$
\item $(x \times y)^* = y^* \times x^*$
\item $\forall \lambda \in \mathbb{C} \: (\lambda x)^* = \lambda \cdot x^*$
\item $||x^* \times x|| = ||x||\cdot||x^*||$
\end{itemize}

Let $I \subseteq A$ be a vector subspace of a $C^*$-algebra $A$, then $I$ is an (two-sided) ideal, if:
\begin{itemize}
\item $a \in A$ and $b \in I$ implies $a \times b \in I$,
\item $a \in I$ and $b \in A$ implies $a \times b \in I$.
\end{itemize}
An ideal is closed, if it is closed subset of $A$ in the norm topology. One can show that any ideal is closed under involution.

TODO: Let $A$ be a $C^*$-algebra, define the \emph{spectrum} of $A$ as

\section{Quantalic cover systems for quantale representation}

Let $\mathcal{P} = (P, \leq)$ be a poset and $x \in \mathcal{P}$, the upper cone generated by $x$ is the set $\uparrow x = \{ y \in P \: | \: x \leq y \}$. Let $A \subseteq \mathcal{P}$, define $\uparrow A$ as
\begin{center}
$\uparrow A = \bigcup \limits_{x \in A} \uparrow x$
\end{center}
A subset set $A$ is upward closed whenever $\uparrow A = A$.
We say that $y$ \emph{refines} $x$ if $x \leq y$, or, equivalently, $\uparrow y \subseteq \uparrow x$. We say that a subset $Y$ \emph{refines} if $Y \subseteq \uparrow X$, that is, every element of $y$ refines some element of $X$. The set $\operatorname{Up}(\mathcal{P})$ is the set of all upward closed subsets of $\mathcal{P}$.

Let $\mathcal{Q}$ be a quantale, a function $j : \mathcal{Q} \to \mathcal{Q}$ is a quantic nucleus, if $f$ is a closure operator such that $j a \cdot j b \leq j (a \cdot b)$. An element $a$ is $j$-closed iff $j a = a$.

Let $\mathcal{S} = (S, \cdot, \leq)$ be a partially ordered semigroup and $\operatorname{Cov} : \mathcal{S} \to 2^{2^{\mathcal{S}}}$ a function that assigns every $x \in S$ to the collection of subsets $\operatorname{Cov}(x)$ called $x$-covers. A \emph{quantalic cover system} is a structure $\mathcal{C} = (\mathcal{S}, \operatorname{Cov})$, where $\mathcal{S}$ is a partially ordered semigroup and $\operatorname{Cov}$ is a covering function such that:
\begin{enumerate}
\item For all $x \in \mathcal{P}$ there exists $C \subseteq \mathcal{P}$ such that $C \in \operatorname{Cov}(x)$ and $C \subseteq \uparrow x$,
\item If $C \in \operatorname{Cov}(x)$ and for all $y \in \operatorname{Cov}(C_y)$, then $\bigcup \limits_{y \in C} C_y$,
\item If $x \leq y$, then every $x$-cover can be refined to some $y$-cover, that is, if $C \in \operatorname{Cov}(x)$, then $C' \in \operatorname{Cov}(y)$ such that $C' \subseteq \uparrow C$,
\item If $C \in \operatorname{Cov}(x)$ and $D \in \operatorname{Cov}(y)$, then $C \cdot D$ can be refined by an $x \cdot y$-cover,
\item If $C \in \operatorname{Cov}(x)$ such that $C$ refines $C \cdot D$, then there are $x', y' \in \mathcal{S}$ and $C' \subseteq C$ and $D' \subseteq D$ such that $x' \cdot y' \leq x$ and $C' \in \operatorname{Cov}(x')$ and $D' \in \operatorname{Cov}(y')$.
\end{enumerate}

Given a partially ordered semigroup $\mathcal{S} = (S, \cdot, \leq)$, we can associate the quantale of upsets $\operatorname{Up}(\mathcal{S}) = (\operatorname{Up}(S), \bullet, \subseteq)$, where product is defined by the upward closure of pointwise product.

Given a cover system $\mathcal{C} = (\mathcal{S}, \operatorname{Cov})$. Define a function $j : \operatorname{Up}(\mathcal{S}) \to \operatorname{Up}(\mathcal{S})$:
\begin{center}
$j X = \{ x \in \mathcal{S} \: | \: \exists C \in \operatorname{Cov}(x) \: | \: C \subseteq X \}$
\end{center}

\begin{lemma}
$j (X \bullet Y) \subseteq j X \bullet j Y$, and, therefore, $j$ is a quantic nucleus on the quantale of upsets $\operatorname{Up}(\mathcal{S}) = (\operatorname{Up}(S), \bullet, \subseteq)$.
\end{lemma}

\begin{proof}
$z \in j (X \bullet Y)$, then there are $x, y$ and there are $C \subseteq X$ and $D \subseteq Y$ such that $C \in \operatorname{Cov}(x)$ and $D \in \operatorname{Cov}(y)$ by the definition of $j$. By the forth axiom, $C \cdot D$ can be refined by an $x \cdot y$-cover $A \subseteq \uparrow (C \cdot D)$, so by the third axiom there exists a $z$-cover $E \subseteq \uparrow (C \cdot D) = C \bullet D$, so $z \in E$, and then $z \in j (C \bullet D)$
\end{proof}

Let $\mathcal{C} = (\mathcal{S}, \operatorname{Cov})$ be a cover system, the complex algebra of $\mathcal{C}$, is the quantale $\mathcal{C}^{+} = (\operatorname{Up}(\mathcal{S})_j, \bullet, \bigvee)$, where
\begin{center}
$\bigvee A = j (\bigcup A)$
\end{center}

Dually, given a quantale $\mathcal{Q}$, define $\mathcal{Q}_+ = (\mathcal{Q}, \preceq, \operatorname{Cov})$, where
$x \preceq y$ iff $y \leq x$ and $C \in \operatorname{Cov}(x)$ iff $x \leq \bigvee C$. Product is defined by product in $\mathcal{Q}$.

\begin{lemma}
$\mathcal{Q}_+$ satisfies the quantalic cover system axioms
\end{lemma}

\begin{theorem}
Let $\mathcal{Q}$ be a quantale, then $\mathcal{Q} \cong (\mathcal{Q}_+)^+$.
\end{theorem}


\section{Localic cover systems for locale representation}

A \emph{localic cover system} is a tuple $\mathcal{C} = (\mathcal{P}, \operatorname{Cov})$, where $\mathcal{P}$ is a poset and $\operatorname{Cov} : \mathcal{P} \to 2^{2^{\mathcal{P}}}$ (we call the $\operatorname{Cov}(x)$ \emph{covers of $x$} or \emph{$x$-covers}) such that:
\begin{itemize}
\item For all $x \in \mathcal{P}$ there exists $C \subseteq \mathcal{P}$ such that $C \in \operatorname{Cov}(x)$ and $C \subseteq \uparrow x$,
\item If $C \in \operatorname{Cov}(x)$ and for all $y \in \operatorname{Cov}(C_y)$, then $\bigcup \limits_{y \in C} C_y$,
\item If $x \leq y$, then every $x$-cover can be refined to some $y$-cover, that is, if $C \in \operatorname{Cov}(x)$, then $C' \in \operatorname{Cov}(y)$ such that $C' \subseteq \uparrow C$,
\item Every $x$-cover is included in $\uparrow x$.
\end{itemize}

Goldblatt uses the term "localic cover system" for cover systems where the forth condition is weaker than ours. According to Goldblatt's terminology, a cover system as above is called a \emph{strict localic cover system}. In this subsection, we are not going to consider other cover systems except for localic ones, so we will be ommiting the word ``localic'' most of the times.

Let $\mathcal{C} = (\mathcal{P}, \operatorname{Cov})$ be a localic cover system. Define an operator $j : 2^\mathcal{P}
\to 2^\mathcal{P}$:
\begin{center}
$j A = \{ x \in \mathcal{P} \: | \: \exists C \subseteq \mathcal{P} \: C \in \operatorname{Cov}(x) \: \& \: C \subseteq A\}$
\end{center}

An upward closed subset of a cover system is localised if $j A = A$. $\operatorname{Up}(\mathcal{P})_j$ is the set of all $j$-localised subsetes of $\mathcal{P}$

\begin{lemma} Let $\mathcal{C} = (\mathcal{P}, \operatorname{Cov})$ be a cover system and $A$ an upset, then

\begin{enumerate}
\item $j A$ is an upset,
\item $j$ is a closure operator on $\operatorname{Up}(\mathcal{P})$,
\item $j (A \cap B) = j A \cap j B$.
\end{enumerate}

\end{lemma}

\begin{proof}
$ $
\begin{enumerate}
\item Let $x \in j A$ and $x \leq y$. We need $y \in j A$.

By the definition of $j$, there exists $C \in \operatorname{Cov}(x)$ such that $C \subseteq A$.
By the refinement axiom, we have $C' \in \operatorname{Cov}(y)$ such that $C' \subseteq \uparrow C$.
But $\uparrow C \subseteq \uparrow A = A$, so $y \in j A$, that makes $j A$ upward closed.
\item Let $x \in A$, then by the first axiom, we have $C \in \operatorname{x}$ with $C \subseteq \uparrow x \subseteq A$, so $x \in j A$. Idempotence follows from transitivity (the third axiom).

\item To show multiplicativity, this is enough to show $A \cap j B \subseteq j (A \cap B)$.
Let $x \in A \cap j B$. Then there exists an $x$-cover $C \subseteq B$, but every $x$-cover is included in $\uparrow x$, but $\uparrow x \subseteq A$ and also $\uparrow C \subseteq B$, so $x \in j (A \cap B)$
\end{enumerate}
\end{proof}

Let $\mathcal{C} = (\mathcal{P}, \operatorname{Cov})$ be a cover system, the complex algebra of a cover system is a structure $\mathcal{C}^{+} = (\operatorname{Up}(\mathcal{P})_j, \wedge, \bigvee)$, where
\begin{itemize}
\item $A \wedge B = A \cap B$,
\item $\bigvee \limits_{i \in I} A_i = j(\bigcup \limits_{i \in I} A)$
\end{itemize}.

\begin{lemma}
$\mathcal{C}^{+}$ is well-defined, moreover, $\mathcal{C}^{+}$ is a frame.
\end{lemma}

\begin{proof}
$A \wedge \bigvee \limits_{i \in I} A_i = A \cap j (\bigcup \limits_{i \in I} A_i) = j A \cap j (\bigcup \limits_{i \in I} A_i) = j (A \cap \bigcup \limits_{i \in I} A_i) = j (\bigcup \limits_{i \in I} A \cap A_i) = \bigvee \limits_{i \in I} (A \wedge A_i)$
\end{proof}

Dually, let $\mathcal{L} = (L, \wedge, \bigvee)$ be a frame, then its dual cover system $\mathcal{L}_+ = (L, \preceq, \operatorname{Cov})$, where $(L, \preceq)$ is a dual poset of $L$, that is, $x \preceq y$ iff $y \leq x$ and $C \in \operatorname{Cov}(x)$ iff $x = \bigvee C$. Clearly the upper cone generated by $x$ in $(L, \leq)$ is the same as the lower cone generated by $x$ in $(L, \preceq)$. We denote it as $(a]$

\begin{lemma} Let $\mathcal{L}$ be a frame, then $\mathcal{L}_+$ is a localic cover system
\end{lemma}
\begin{proof}
We have to verify four axioms.

\begin{itemize}
\item Let $x \in \mathcal{L}$, then $x = \bigvee (x]$, so $\bigvee (x]$ is an $x$-cover that obviously contains $\uparrow x$.
\item Let $x = \bigvee C$ and for all $y \in C$ we have $y = \bigvee \limits_{y \in C} C_y$, then
\begin{center}
$x = \bigvee \limits_{y \in C} \bigvee C_y = \bigvee \bigvee \limits_{y \in C} C_y = \bigvee (\bigcup \limits_{y \in C} C_y)$, so $x$ is also covered by $\bigcup \limits_{y \in C} C_y$.
\end{center}
\item Let $x \leq y$ and $x = \bigvee C$. Let $C' = \{ y \wedge c \: | \: c \in C \}$, then $y = \bigvee C'$ is a $y$-cover and $C'$ refines $C$ since $y \wedge c \leq c$.
\item Let $x = \bigvee C$, so $C \subseteq \uparrow x$
\end{itemize}
\end{proof}

\begin{theorem} (Representation theorem)

$\mathcal{L} \cong (\mathcal{L}_+)^{+}$
\end{theorem}

\begin{proof}
By mapping $x \mapsto (x]$.
\end{proof}

\section{Geometric logic and geometric categories}

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \rightarrow \varphi$}
\end{prooftree}

\begin{minipage}{0.5\textwidth}
\begin{flushleft}
\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \vdash \top$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi_1 \land \varphi_2 \vdash \varphi_i$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$\varphi \vdash \psi$}
  \AxiomC{$\varphi \vdash \theta$}
  \BinaryInfC{$\varphi \vdash \psi \land \theta$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\varphi \vdash \psi$}
\RightLabel{$x \notin FV(\varphi)$}
\UnaryInfC{$\exists x \varphi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$\varphi \vdash \psi$}
  \AxiomC{$\psi \vdash \theta$}
  \BinaryInfC{$\varphi \vdash \theta$}
\end{prooftree}

\end{flushleft}
\end{minipage}\hfill
\begin{minipage}{0.5\textwidth}
\begin{flushright}
\begin{prooftree}
\AxiomC{$ $}
\RightLabel{$\varphi \in \Phi$}
\UnaryInfC{$\varphi \vdash \bigvee \Phi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\varphi \vdash \psi$}
\RightLabel{$\varphi \in \Phi$}
\UnaryInfC{$\bigvee \Phi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \land \bigvee \Phi \vdash \bigvee \limits_{\phi \in \Phi} (\varphi \land \phi$)}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\exists x \varphi \vdash \psi$}
\RightLabel{$x \notin FV(\varphi)$}
\UnaryInfC{$\varphi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\RightLabel{$x \notin FV(\psi)$}
\UnaryInfC{$\varphi \land \exists x \psi \vdash \exists x (\varphi \land \phi$)}
\end{prooftree}

\end{flushright}
\end{minipage}

\section{Non-commutative geometric logic, non-commutative geometric categories and completeness}

We define the non-commutative geometric logic with the following axioms and inference rules.

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \rightarrow \varphi$}
\end{prooftree}

\begin{minipage}{0.5\textwidth}
\begin{flushleft}

\begin{prooftree}
  \AxiomC{$\varphi \vdash \psi$}
  \UnaryInfC{$\varphi \bullet \theta \vdash \psi \bullet \theta$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$\varphi \vdash \psi$}
  \UnaryInfC{$\theta \bullet \varphi \vdash \theta \bullet \psi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \bullet (\psi \bullet \theta) \dashv \vdash (\varphi \bullet \psi) \bullet \theta$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\varphi \vdash \psi$}
\RightLabel{$x \notin FV(\varphi)$}
\UnaryInfC{$\exists x \varphi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$\varphi \vdash \psi$}
  \AxiomC{$\psi \vdash \theta$}
  \BinaryInfC{$\varphi \vdash \theta$}
\end{prooftree}

\end{flushleft}
\end{minipage}\hfill
\begin{minipage}{0.5\textwidth}
\begin{flushright}
\begin{prooftree}
\AxiomC{$ $}
\RightLabel{$\varphi \in \Phi$}
\UnaryInfC{$\varphi \vdash \bigvee \Phi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\varphi \vdash \psi$}
\RightLabel{$\varphi \in \Phi$}
\UnaryInfC{$\bigvee \Phi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\UnaryInfC{$\varphi \bullet \bigvee \Phi \vdash \bigvee \limits_{\phi \in \Phi} (\varphi \bullet \phi)$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$\exists x \varphi \vdash \psi$}
\RightLabel{$x \notin FV(\varphi)$}
\UnaryInfC{$\varphi \vdash \psi$}
\end{prooftree}

\begin{prooftree}
\AxiomC{$ $}
\RightLabel{$x \notin FV(\psi)$}
\UnaryInfC{$\varphi \bullet \exists x \psi \vdash \exists x (\varphi \bullet \phi$)}
\end{prooftree}

\end{flushright}
\end{minipage}

\section{Elementary topoi}

Let $A, B \in \operatorname{Ob}(\mathcal{C})$. $A$ is said to be a subobject of $B$ iff there exists a monic arrow $h : A \hookrightarrow B$. The inclusion relation on objects is defined by ``inclusion'' on monic arrows.

Let $f : A \hookrightarrow D$ and $g : B \hookrightarrow D$, then $f \subseteq g$ iff there exists an arrow $h : A \to B$ making this trianlge commute:

\xymatrix{
&&&&&& B \ar@{^{(}->}[dr]^{g} \\
&&&&&&& D \\
&&&&&& A \ar[uu]^{h} \ar@{^{(}->}[ur]_{f}
}
that is, $f = g \circ h$

\begin{prop}
Such an $h$ is monic.
\end{prop}

\begin{prop}
$f \subseteq f$.
\end{prop}

\begin{proof}
The following triangle obviously commutes:

\xymatrix{
&&&&&& A \ar@{^{(}->}[dr]^{f} \\
&&&&&&& D \\
&&&&&& A \ar[uu]^{{\bf id}_A} \ar@{^{(}->}[ur]_{f}
}
\end{proof}

\begin{prop}
$f \subseteq g$ and $g \subseteq k$ imply $f \subseteq k$.
\end{prop}

\begin{proof}
The following triangle commutes:

\xymatrix{
&&&&&& C \ar@{^{(}->}[dr]^{k} \\
&&&&&& B \ar[u]^i \: \ar@{^{(}->}[r]_{g} & D \\
&&&&&& A \ar[u]^h \ar@{^{(}->}[ur]_{f}
}
Because of obvious calculations:
\begin{center}
$k \circ i \circ h = k \circ (i \circ h) = k \circ g = f$
\end{center}
\end{proof}

We also say that $f \simeq g$, whenever $f \subseteq g$ and $g \subseteq f$. In such case we shall identify them and omit metamathematical nitpicking.

Assume that a category $\mathcal{C}$ has a terminal object ${\bf 1}$, an arrow $x : {\bf 1} \to A$ is called an \emph{element} of $\mathcal{A}$.

Let $\mathcal{C}$ be a category with a terminal object ${\bf 1}$. A \emph{subobject classifier} for $\mathcal{C}$ is an object $\Omega$ with an arrow $\top : {\bf 1} \to \Omega$ such that for each $f : A \hookrightarrow D$ there exists a unique arrow $\chi_f : D \to \Omega$ (the {\emph characterstic arrow} of $f$) making the following square a pullback:

\xymatrix{
&&&&&& A \: \ar[d]_{!} \ar@{^{(}->}[r]^f & D \ar[d]^{\exists! \chi_f} \\
&&&&&& {\bf 1} \ar[r]_{\top} & \Omega
}

Consider ${\bf Top}$, the category of topological spaces. Although it is not an elementary topos ({\bf Top} has no exponentiation objects), however it has an open subspace classifier.
The Sierpinski space $\Sigma$ is the space on the two-element set $2 = \{ 0, 1 \}$ with opens $\emptyset$, $2$ and $\{ 1 \}$. Let $D$ be a topological space and $A$ its open subspace, so the following diagram

\xymatrix{
&&&&&& A \: \ar[d]_{!} \ar@{^{(}->}[r] & D \ar[d]^{\chi_A} \\
&&&&&& {\bf 1} \ar[r]_{\top} & \Sigma
}

says that there is a unique continuous function $\chi_A$ defined as
\begin{center}
$\chi_A(x) = \begin{cases} 1 \text{  if $x \in A$} \\ 0 \text{  otherwise} \end{cases} $
\end{center}
such that $A = \chi_A^{-1}({\bf 1})$.

Also the Sierpinski space also allows us classifying closed subspaces. Let $D$ be a topological space and $A$ a closed subspace of $D$. The following diagram

\xymatrix{
&&&&&& A \: \ar[d]_{!} \ar@{^{(}->}[r] & D \ar[d]^{\chi_A} \\
&&&&&& {\bf 0} \ar[r]_{\bot} & \Sigma
}
says that there is a unique continuous function $\chi_A$ such that $A = \chi_A^{-1}({\bf 0})$.

As in the example with the Sierpinski space, we shall write $\chi_A$ for characterstic arrows instead of $\chi_f$ to make notation closer to usual set-theoretic mathematics.

One can establish the criterion of subobject equality in term of a subobject classifier.

\begin{lemma}

Let $\mathcal{C}$ be a category with a subobject classifier $\Omega$, then for all $f : A \hookrightarrow D$ and $g : B \hookrightarrow D$, then

\begin{center}
$f \simeq g$ iff $\chi_A = \chi_B$
\end{center}

\end{lemma}

\begin{proof}
Suppose $\chi_A = \chi_B$. But the axioms of a subobject classifier, the following square is a pullback:

\centerline{
\xymatrix{
B \ar@/_/[ddr]_{!} \ar@/^/[drr]^g
\ar@{.>}[dr]^{k} \\
& A \ar[d]_{!} \ar[r]^f
& X \ar[d]^{\chi_A} \\
& {\bf 1} \ar[r]_{\top} & \Omega }
}

By assumption, the outer square commutes, the inner square is a pullback, so we have a unique arrow $k$ that factors $g$ through $h$, so $g \subseteq f$. One can show that $f \subseteq g$ similarly.

If $f \simeq g$, then $k$ is iso, so the outer square is a pullback, and that implies that $\chi_A$ is the unique character of $B$, so $\chi_A = \chi_B$.
\end{proof}

A category $\mathcal{C}$ is called an \emph{elementary topos} if:
\begin{itemize}
\item $\mathcal{C}$ is Cartesian closed,
\item $\mathcal{C}$ has coproducts,
\item $\mathcal{C}$ has an initial object ${\bf 0}$,
\item $\mathcal{C}$ has a subobject classifier $\Omega$.
\end{itemize}

\section{Sheaves, Sites and Grothendieck toposes}

Let $\mathcal{I} = (I, \theta)$ be a topological space. Consider $\theta$ as a poset. A {\emph presheaf} over $\mathcal{I}$ is a contravariant functor from $\theta$ to ${\bf Set}$.

The notion of a presheaf generalises essentially the following construction from set-theoretic topology. First of all, we discuss a set-theoretic examples without referring to topology. Consider an indexed family of disjoint sets:
\begin{center}
$\mathcal{A} = \{ A_i \: | \: i \in I \}$.
\end{center}
We can associate an obvious map $p : A \to I$ since for every $x \in \mathcal{A}$ there is a unique $i \in I$ such that $x \in A_i$. Take

\begin{center}
$p^{-1}(\{ i \}) = \{ x \: | \: p(x) = i\} = A_i$
\end{center}

Such $p^{-1}(\{ i \})$ is called the \emph{fibre} over $i$, the whole structure is a bundle of sets over the base space $I$, $\mathcal{A}$ is the stalk space (l'espace etale) of the bundle. More generally, we can extract the bundle from every map $p : A \to I$

A morphism of bundles $(A, I)$ and $(B, I)$ is a commutative triangle of the following form:

\xymatrix{
&&&&&& A \ar[rr]^f \ar[dr]_{p_1} && B \ar[dl]^{p_2}\\
&&&&&&& I
}

Topologically, a sheaf is a version of bundles for topological spaces. Let $\mathcal{I} = (I, \theta)$ be a topological space. A sheaf is a tuple $(\mathcal{A}, p)$, where $\mathcal{A}$ is a topological space and $p : A \to I$ is a continuous map, which is also a local homeomorphism, that is, every $x \in \mathcal{A}$ has an open neighbourhood, which mapped homeomorphically by $p$ onto $p(U)$ and $p(U)$ is open in $I$. The category of all sheaves of $I$ is sometimes called a spatial topos.

We can extract a presheaf from a sheaf $(A, f)$ as a contravariant functor $F_f : \theta \to {\bf Set}$ as
\begin{center}
$F_f(V) = \{ s : V \to A \: | \: \text{$s$ is continuous and $f \circ s = V \hookrightarrow I $}\}$
\end{center}

The category of presheafs over $I$, denoted as ${\bf PsC}(I)$, consists of presheafs as objects and natural transformations $\tau : F \Rightarrow G$, that is, a collection of functions $\tau_U : F(U) \to G(U)$ making this square commute whenever $U \subseteq V$

\xymatrix{
&&&&& F(V) \ar[d]_{F^V_U} \ar[rr]^{\tau_V} && G(V) \ar[d]^{G^V_U} \\
&&&&& F(U) \ar[rr]_{\tau_U} && G(U)
}

It is clear that ${\bf PsC}(I)$ is equivalent to ${\bf Set}^{\theta^{Op}}$.

Let $F : \theta \to {\bf Set}$ be a presheaf. Let $x \in X$ and let $U, V$ be open neighbourhoods of $x$.
Let $s \in F(U)$ and $t \in F(V)$. $S$ and $T$ are said to have the \emph{same germ} at $x$, whenever there exists an open set $W \subseteq U \cap V$ with $x \in W$ such that $s|W = t|W \in P(W)$. Having the same germ is an equivalence relation, and the \emph{germ} of $s$ in $x$ in an equivalence class of $s$ denoted as $germ_x s$.

The \emph{stalk} of $F$ in $x$ is the set of all germs of $x$
\begin{center}
$F_x = \{ germ_x s \: | \: s \in F(U), U \in \theta \}$
\end{center}

Let $X$ be an index set and $V$ an open set, an \emph{open cover} of $V$ is a collection of sets $\{ V_x\}_{x \in X}$ such that
\begin{center}
$V = \bigcup \limits_{x \in X} V_x$
\end{center}

Intuitively, a sheaf is a presheaf that preserves open covers.

A \emph{sheaf} is a presheaf $F$ satisfying the following two extra-principles. Let $V$ be an open set and $\{V_x
\}_{x \in X}$ an open cover, then:
\begin{enumerate}
\item Let $s, t \in F(V)$ be sections such that such that $s|_{V_x} = t|_{V_x}$ for $x \in X$, then $s = t$.
\item Let $\{ s_x \in F(V_x) \}_{x \in X}$ be a family of sections. If for all $x, y \in X$ we have $s_x|_{V_x \cap V_y} = s_y|_{V_x \cap V_y}$, then there exists a section $s \in F(V)$ such that $s|_{V_x} = s_x$ for all $x \in X$.
\end{enumerate}
Equivalently, we can reformulate the latter as that $F(V) = \varprojlim_{x \in X} F(V_x)$.
The category ${\bf Sh}(I)$ is a category of sheaves over $I$.

\subsection{Grothendieck topos}

The notion of a Grothendieck topos generalises the aforementioned topological constructions. We start with the definition of a site.

Let $\mathcal{C}$ be a locally small category. A \emph{pretopology} on $\mathcal{C}$ is an assignment of each $A \in {\bf Ob}(\mathcal{C})$ of a collection of arrows $\operatorname{Cov}(A)$ (covers of $A$, or covering sieves) with the following properties:
\begin{enumerate}
\item $\{ id_A : A \to A \} \in \operatorname{Cov}(A)$
\item If $\{ f_x : A_x \to A \: | \: x \in X \} \in \operatorname{Cov}(A)$ and for each $x \in X$ we have an $a_x$-cover
\begin{center}
$\{ f_y^x : A_y^x \to A_x \: | \: y \in Y_x \} \in \operatorname{Cov}(A_x)$
\end{center}
then
\begin{center}
$\{ f_x \circ f_y^x : A^x_y \to A \: | \: x \in X, y \in Y_x\} \in  \operatorname{Cov}(A)$
\end{center}
\item If $\{ f_x : A_x \to A \: | \: x \in X \} \in \operatorname{Cov}(A)$ and $g : B \to A$ and assume that for each $x \in X$ the pullback of $f_x$ along $g$ exists:

\xymatrix{
&&&&& B \times_A A_x \ar[r] \ar[d]_{g_x} & A_x \ar[d]^{f_x}\\
&&&&& B \ar[r]_{g} & A
}
then $\{ g_x : B \times_A A_x \to B \:| \: x \in X\} \in \operatorname{Cov}(B)$
\end{enumerate}

A \emph{site} is the pair $(\mathcal{C}, \operatorname{Cov})$ consisting of a category and a pretopology on it.

A Grothendieck topos is a site with extra-conditions that generalise the axioms of topological sheaves in terms of a pretopology. A presheaf of sets over a category $\mathcal{C}$ is a contravariant functor $F : \mathcal{C} \to {\bf Set}$

Let $\operatorname{Cov}$ be a pretopology on a category $\mathcal{C}$ and $\{ f_x : A_x \to A \: | \: x \in X \} \in \operatorname{Cov}(A)$. Let $x, y \in X$ and we have the pullback of $f_x$ and $f_y$

\xymatrix{
&&&&& A_x \times_A A_y \ar[r] \ar[d] & A_y \ar[d]^{f_y}\\
&&&&& A_x \ar[r]_{f_x} & A
}

If $F$ is a presheaf over $\mathcal{C}$, then we have arrows $F^x_y : F(A_x) \to F(A_x \times_A A_y)$ and $F^y_x : F(A_y) \to F(A_x \times_A A_y)$. Denote $F_x$ as the arrow $F(f_x) : F(A) \to F(A_x)$.



A presheaf $F$ is a sheaf, if for any cover $\{ f_x : A_x \to A \: | \: x \in X \} \in \operatorname{Cov}(A)$, then for all $x, y \in X$ such that for all $s_x \in F(A_x)$ and $s_y \in F(A_y)$ such that $F^x_y(s_x) = F^y_x(y)$, then there exists a unique $s \in F(A)$ such that $F_x(s) = s_x$ for $x \in X$.

${\bf Sh}(\operatorname{Cov})$ is the category of sheaves of the site $(\mathcal{C}, \operatorname{Cov})$. A Grothendieck topos is a category of sheaves of some site up to categorical equivalence.

Alternatively, one can define a Grothendieck topos in terms of a Grothendieck topology as follows. Define a sieve $S$
as family morphisms in a category $\mathcal{C}$ that behaves as a right ideal:

\begin{center}
$f \in S$ implies $f \circ g \in S$
\end{center}

If $S$ is a sieve on $C \in \operatorname{Ob}(\mathcal{C})$ and $h \in Hom(D, C)$ for any $D \in \operatorname{Ob}(\mathcal{C})$, then
\begin{center}
$h^*(S) = \{ g \: | \: cod(g) = D, g \circ h \in S \}$
\end{center}

A \emph{Grothendieck topology} on a category $\mathcal{C}$ is a function $J$ that maps every $C \in \operatorname{Ob}(\mathcal{C})$, denoted as $J(C)$ such that:
\begin{enumerate}
\item the maximal sieve $t_C = \{ f \: | \: cod(f) = C\} \in J(C)$
\item If $S \in J(C)$, then $h^*(S) \in J(D)$
\item If $S \in J(C)$ and $R$ is a sieve of $C$ such that $h^*(R) \in J(D)$ for all $h : D \to C$, then $R \in J(C)$
\end{enumerate}
Also any $J(C)$ is upward closed.

\subsection{Lawvere-Tierney topology}

\subsection{Examples}

We start with some examples of a site.

Let $\mathcal{T}$ be a small category of topological spaces closed under finite limits and under taking open subspaces. Define $\operatorname{Cov}$ as:
\begin{center}
$\{ f_i : Y_i \to X \: | \: i \in I \}$ iff each $Y_i$ is an open subspace of $X$ and $\bigcup \limits_{i \in I} Y_i = X$
\end{center}

The first axiom holds obviously, the second axiom holds since $\mathcal{T}$ is closed under taking subspaces. The third axiom holds because of the closure under finite limits.

Let $H$ be a frame. One can define a pretopology on a frame by putting:
\begin{center}
$\{ a_i \: | \: i \in I \} \in \operatorname{Cov}(c)$ iff $c = \bigvee \limits_{i \in I} a_i$
\end{center}

\subsubsection{The Zariski site}

Let $f_1, \dots, f_m \in \mathbb{C}[x_1, \dots, x_n]$, the locus of $f_1, \dots, f_m$ is the set
\begin{center}
$V(f_1, \dots, f_m) = \{ (z_1, \dots, z_n) \in C^n \: | \: f_i(z_1, \dots, z_n) = 0, i = 1, \dots, m \}$
\end{center}
Such a locus is called a \emph{complex affine variety}. With every variety $V$ we can associate the following ideal in the polynomial ring $\mathbb{C}[x_1, \dots, x_n]$:
\begin{center}
$I_V = \{ f \in \mathbb{C}[x_1, \dots, x_n] \: | \: \forall \vec{z} \in V f(\vec{z}) = 0 \}$
\end{center}
Conversly, let $I$ be an ideal in the polynomial ring $\mathbb{C}[x_1, \dots, x_n]$, then we can define the variety
\begin{center}
$V_I = \{ (z_1, \dots, z_n) \in C^n \: | \: f(z_1, \dots, z_n) = 0, f \in I \} $
\end{center}
If $I = (f_1, \dots, f_m)$, then $V_I = V(f_1, \dots, f_m)$.

With every ideal $I$ we can associate its radical
\begin{center}
$\sqrt{I} = \bigcup \limits_{0 < r < \omega} \{ f \in \mathbb{C}[x_1, \dots, x_n] \: | \: f^r \in I \}$
\end{center}
According to the Hilbert Nullstellensatz, $V_J \neq V_I$ whenever $\sqrt{I} \neq \sqrt{J}$.

The maximal ideals in $\mathbb{C}[x_1, \dots, x_n]$ have the form $(x_1 - a_1, \dots, x_n - a_n)$, so the corresponding variety is merely the singleton $\{ (a_1, \dots, a_n) \}$, a minimal algebraic variety. A prime ideal $P$ (that is, $fg \in P$ implies $g \in P$) in $\mathbb{C}[x_1, \dots, x_n]$ is a radical ideal. The corresponding variety of $P$ is irreducible, that is, it cannot be represented as the union of a finite number of smaller ideals. Moreover, every radical ideal can be represented as the intersection of some finite number of prime ideals. Dually, every complex affine variety can be represented as the union of some finite number of irreducible varieties.

The \emph{Zariski topology} on $\mathbb{C}^n$ is a topology defined on irreducible varieties as a closed subbasis. An algebraic hypersufrace is the locus of a single polynomial $f(x_1, \dots, x_n) = 0$. The complements of hypersurfaces form the open subbasis for the Zariski topology. An example of a cover of $\mathbb{C}^n$ can be defined by $t$ polynomials $f_1, \dots, f_t \in \mathbb{C}[x_1, \dots, x_n]$ such that $f_1 + \dots + f_t = 1$. Their hypersurfaces have no common points, so their complements are an open cover of $\mathbb{C}^n$.

With the Zariski topology, we can associate a \emph{structure sheaf}. Consider a field $\mathbb{F} = \mathbb{C}(x_1, \dots, x_n)$ consisting of rational functions, where $g \neq 0$. A rational function $h$ is defined at $Q \in (a_1, \dots, a_n) \in \mathbb{C}^n$, whenever there is a Zariski open set $W$, an open neighbourhood of $Q$, such that $h$ has the form $f/g$ for some $f, g \in \mathbb{C}[x_1, \dots, x_n]$ such that $g(\vec{z}) \neq 0$ for all $\vec{z} \in W$. In other words, $h$ yields a function $W \to \mathbb{C}$.

Now let $U$ be an open set in the Zariski topology, define $\mathcal{O}(U)$ as
\begin{center}
$\mathcal{O}(U) = \{ h \in \mathbb{F} \: | \: \forall Q \in U \: \text{$h(Q)$ is defined} \}$
\end{center}
The set $\mathcal{O}(U)$ is a ring, a moreover, a subring of a field $\mathbb{F}$ whenever $U$ is non-empty. $\mathcal{O}$ is also a contravariant functor (if we consider the Zariski topology on $\mathbb{C}$ as a category). Given $U \subseteq U'$, then $\mathcal{O}(U') \to \mathcal{O}(U)$ is a ring homomorphism that restricts each $h \in \mathcal{O}(U')$ to points of $U$. That is, $\mathcal{O}$ is a presheaf of rings for the Zariski topology on $\mathbb{C}^n$. It is also can be showed that $\mathcal{O}$ is a sheaf.

The stalk of $\mathcal{O}$ at a point $p \in \mathbb{C}^n$ consists of germs of all those rational functions defined in some open neighbourhood of $p$. Such a stalk is a ring with a unique maximal proper ideal, the ideal of all those germs that vanish at $p$. A \emph{local ring} is a ring of such form.

More generally, we consider the category of all affine varieties of $V \subseteq \mathbb{C}^n$ (for various $n \geq 0$), where morphisms $\phi : V \to W$ are defined as follows. Clearly $V = V(I)$ and $W = V(I')$ for some ideals $I$ and $I'$. $\phi$ is a function defined by an $m$-tuple $\phi = (h_1, \dots, h_m)$ of rational functions of $x_1, \dots, x_n$ such that each $h_i$ is defined at every point of $V$ and $(h_1, \dots, h_m)$ as a function $V \to \mathbb{C}^m$ maps $V$ into $W$.

This category can be equipped with the open cover topology, which is the Grothedieck topology defined by covering families of Zariski open sets.

This construction can be generalised as the Zariski site over a commutative ring $K$.

Let $K$ be a commutative ring with unit, define a ring $K[a^{-1}]$ of quotients for $a \in K$ that extends $K$ with fractions $b/a^n$ for each $b \in K$ and $n < \omega$.

As above, one can define the $n$-dimensional affine space $K^n$. Let $I$ be an ideal in the polynomial ring $K[x_1, \dots, x_n]$, we can define the variety $V_I$ defined similarly to the complex case. Generally, the Nullstellensatz is not the case for an abstract $K[x_1, \dots, x_n]$, so we shall work with quotient rings $K[x_1, \dots, x_n]/I$. Let $f_1, \dots, f_m \in K[x_1, \dots, x_n]$, the \emph{finitely presented $K$-algebra} is the quotient ring $K[x_1, \dots, x_n]/(f_1, \dots, f_m)$. $(K - Alg)_{fp}$ is the category all finitely presented $K$-algebra. There is a contravariant adjointness between $(K - Alg)_{fp}$ and the corresponding varieties.


\subsubsection{Sheaves of rings on a locale}

This example is an example of both sheaves and quantales.

Let $\mathcal{L}$ be a frame and $\mathcal{O} : L \to {\bf Ring}$ a sheaf of rings on $\mathcal{L}$. We show that $\operatorname{Idl}(\mathcal{O})$, a sheaf of ideals of $\mathcal{O}$ is a quantale.

A presheaf $I$ on $\mathcal{L}$ is a \emph{presheaf of ideals} of $\mathcal{O}$ if for all $a \in \mathcal{L}$
$I(a)$ is an ideal $\mathcal{O}(a)$. If $I$ is a sheaf, then $I$ is a sheaf of ideals, or ideal of $\mathcal{O}$. The set $\operatorname{Idl}(\mathcal{O})$ is the set of all ideals of $\mathcal{O}$.

Let $I$ be a presheaf of ideals of $\mathcal{O}$, then the \emph{sheafification} $\langle I \rangle$ of $I$ is defined as, for all $a \in L$:
\begin{center}
$r \in \langle I \rangle(a)$ iff there exists a cover $\{ a_i \}_{i \in I}$ of $L$ with $r|a_i$ for all $i \in I$
\end{center}

$\langle I \rangle$ can be also defined explicitly as:
\begin{center}
$\langle I \rangle = \bigcap \{ J \in \operatorname{Idl}(\mathcal{O}) \: | \: I \subseteq J \}$
\end{center}

Consider a family $\{ I_j \}_{j \in J}$ of ideals where each $I_j \in \operatorname{Idl}(\mathcal{O})$, then the assignment $a \mapsto \sum \limits_{j \in J} I_j(a)$ is a presheaf, but it does not have to be a sheaf, but supremum in the lattice $\operatorname{Idl}(\mathcal{O})$ is defined as $\langle \sum \limits_{j \in J} I_j \rangle$.

Now we define an example of such a sheaf from the Zariski space, the dual space of a commutative ring.

TODO: complete this subsection

\section{Sheaves on a quantale}

\section{Kripke-Joyal semantics and quantifiers via adjoint functors}

\section{Internal logic}

\section{Geometric morphisms}

\section{Geometric logic}

\section{Kripke-Joyal semantics for quantales and non-commutative geometric theories}

\bibliographystyle{alpha}
\bibliography{Text}

\end{document}
